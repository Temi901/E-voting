{% extends 'voting/base.html' %}

{% block title %}Register - E-Voting System{% endblock %}

{% block content %}
<style>
    :root {
        --ink: #0d0f14; --surface: #f5f4f0; --card: #ffffff;
        --accent: #1a3c5e; --gold: #c9a84c; --gold-light: #f0d98c;
        --muted: #6b7280; --border: #e2ddd6; --radius: 12px;
        --transition: 0.28s cubic-bezier(.4,0,.2,1);
    }

    .auth-layout {
        min-height: calc(100vh - 72px);
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    /* Left panel */
    .auth-panel {
        background: var(--accent);
        position: relative; overflow: hidden;
        padding: 60px 56px;
        display: flex; flex-direction: column; justify-content: center;
    }
    .auth-panel-bg {
        position: absolute; inset: 0;
        background:
            radial-gradient(ellipse 70% 60% at 20% 70%, rgba(201,168,76,0.12) 0%, transparent 60%),
            linear-gradient(150deg, #0d1f33 0%, #1a3c5e 100%);
        background-image: radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px);
        background-size: 32px 32px;
    }
    .auth-panel-bg::after {
        content: '';
        position: absolute; inset: 0;
        background-image: radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px);
        background-size: 32px 32px;
    }
    .auth-panel-content { position: relative; z-index: 2; }
    .auth-panel-icon {
        width: 56px; height: 56px; border-radius: 14px;
        background: rgba(201,168,76,0.2);
        border: 1px solid rgba(201,168,76,0.35);
        display: flex; align-items: center; justify-content: center;
        font-size: 1.5rem; margin-bottom: 32px;
    }
    .auth-panel h2 {
        font-family: 'Playfair Display', serif;
        font-size: 2.2rem; font-weight: 700; color: #fff;
        line-height: 1.2; margin-bottom: 16px; letter-spacing: -0.02em;
    }
    .auth-panel p { color: rgba(255,255,255,0.55); line-height: 1.7; font-size: 0.95rem; }
    .auth-panel-features { margin-top: 48px; display: flex; flex-direction: column; gap: 18px; }
    .auth-feature {
        display: flex; align-items: center; gap: 14px;
    }
    .auth-feature-dot {
        width: 36px; height: 36px; border-radius: 8px; flex-shrink: 0;
        background: rgba(201,168,76,0.12);
        border: 1px solid rgba(201,168,76,0.25);
        display: flex; align-items: center; justify-content: center;
        font-size: 0.9rem;
    }
    .auth-feature-text { font-size: 0.85rem; color: rgba(255,255,255,0.55); line-height: 1.4; }
    .auth-feature-text strong { color: rgba(255,255,255,0.85); display: block; margin-bottom: 1px; }

    /* Right form panel */
    .auth-form-panel {
        background: var(--surface);
        display: flex; align-items: center; justify-content: center;
        padding: 60px 28px;
    }
    .auth-form-box {
        width: 100%; max-width: 420px;
        animation: formIn 0.5s cubic-bezier(.4,0,.2,1) both;
    }
    @keyframes formIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:none} }

    .auth-form-header { margin-bottom: 36px; }
    .auth-form-label {
        font-size: 0.7rem; font-weight: 600; letter-spacing: 0.12em;
        text-transform: uppercase; color: var(--gold); margin-bottom: 8px;
    }
    .auth-form-title {
        font-family: 'Playfair Display', serif;
        font-size: 1.9rem; font-weight: 700; color: var(--ink);
        letter-spacing: -0.02em; margin-bottom: 6px;
    }
    .auth-form-subtitle { color: var(--muted); font-size: 0.9rem; }

    .form-group { margin-bottom: 20px; }
    .form-group label {
        display: flex; align-items: center; gap: 7px;
        font-size: 0.83rem; font-weight: 600; color: var(--ink);
        margin-bottom: 7px;
    }
    .form-group label i { color: var(--accent); font-size: 0.75rem; }
    .form-group input {
        width: 100%; padding: 12px 16px;
        border: 1.5px solid var(--border);
        border-radius: var(--radius);
        font-family: 'DM Sans', sans-serif;
        font-size: 0.92rem; color: var(--ink);
        background: var(--card);
        transition: all var(--transition);
    }
    .form-group input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(26,60,94,0.1);
    }
    .pw-wrap { position: relative; }
    .pw-wrap input { padding-right: 44px; }
    .pw-toggle {
        position: absolute; right: 12px; top: 50%;
        transform: translateY(-50%);
        background: none; border: none; cursor: pointer;
        color: var(--muted); font-size: 0.9rem;
        transition: color var(--transition);
    }
    .pw-toggle:hover { color: var(--accent); }

    .field-error {
        font-size: 0.78rem; color: #dc2626;
        margin-top: 5px; display: flex; align-items: center; gap: 5px;
    }

    .btn-submit {
        width: 100%; padding: 14px;
        border: none; border-radius: var(--radius); cursor: pointer;
        font-family: 'DM Sans', sans-serif;
        font-size: 0.95rem; font-weight: 600;
        background: var(--accent); color: #fff;
        box-shadow: 0 4px 14px rgba(26,60,94,0.25);
        transition: all var(--transition);
        display: flex; align-items: center; justify-content: center; gap: 8px;
        margin-top: 8px;
    }
    .btn-submit:hover { background: #24527a; transform: translateY(-1px); box-shadow: 0 8px 22px rgba(26,60,94,0.3); }

    .form-divider {
        display: flex; align-items: center; gap: 12px;
        margin: 22px 0; color: var(--muted); font-size: 0.8rem;
    }
    .form-divider::before, .form-divider::after {
        content: ''; flex: 1; height: 1px; background: var(--border);
    }

    .auth-footer { text-align: center; color: var(--muted); font-size: 0.88rem; }
    .auth-footer a { color: var(--accent); font-weight: 600; text-decoration: none; }
    .auth-footer a:hover { color: var(--gold); }

    @media (max-width: 800px) {
        .auth-layout { grid-template-columns: 1fr; }
        .auth-panel { display: none; }
        .auth-form-panel { min-height: calc(100vh - 72px); }
    }
</style>

<div class="auth-layout">
    <!-- Left decorative panel -->
    <div class="auth-panel">
        <div class="auth-panel-bg"></div>
        <div class="auth-panel-content">
            <div class="auth-panel-icon">üó≥Ô∏è</div>
            <h2>Join our democratic platform</h2>
            <p>Create your account to participate in secure, transparent elections.</p>
            <div class="auth-panel-features">
                <div class="auth-feature">
                    <div class="auth-feature-dot">üîí</div>
                    <div class="auth-feature-text">
                        <strong>Secure Registration</strong>
                        Your information is encrypted and protected.
                    </div>
                </div>
                <div class="auth-feature">
                    <div class="auth-feature-dot">‚úÖ</div>
                    <div class="auth-feature-text">
                        <strong>Verified Identity</strong>
                        Each voter is uniquely verified in the system.
                    </div>
                </div>
                <div class="auth-feature">
                    <div class="auth-feature-dot">üìä</div>
                    <div class="auth-feature-text">
                        <strong>Your Voice Counts</strong>
                        Participate in shaping decisions that matter.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right form panel -->
    <div class="auth-form-panel">
        <div class="auth-form-box">
            <div class="auth-form-header">
                <p class="auth-form-label">New Voter</p>
                <h1 class="auth-form-title">Create Account</h1>
                <p class="auth-form-subtitle">Register to start voting in elections</p>
            </div>

            <form method="post">
                {% csrf_token %}

                {% for field in form %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}">
                        {% if 'username' in field.name %}
                            <i class="fas fa-user"></i>
                        {% elif 'email' in field.name %}
                            <i class="fas fa-envelope"></i>
                        {% elif 'password' in field.name %}
                            <i class="fas fa-lock"></i>
                        {% elif 'first_name' in field.name %}
                            <i class="fas fa-id-card"></i>
                        {% elif 'last_name' in field.name %}
                            <i class="fas fa-id-card"></i>
                        {% elif 'voter_id' in field.name %}
                            <i class="fas fa-id-badge"></i>
                        {% endif %}
                        {{ field.label }}
                    </label>
                    
                    {% if 'password' in field.name %}
                    <div class="pw-wrap">
                        {{ field }}
                        <button type="button" class="pw-toggle" onclick="togglePassword('{{ field.id_for_label }}', 'icon_{{ field.name }}')">
                            <i class="fas fa-eye" id="icon_{{ field.name }}"></i>
                        </button>
                    </div>
                    {% else %}
                        {{ field }}
                    {% endif %}
                    
                    {% if field.errors %}
                    <p class="field-error"><i class="fas fa-exclamation-circle"></i> {{ field.errors.0 }}</p>
                    {% endif %}
                </div>
                {% endfor %}

                <button type="submit" class="btn-submit">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
            </form>

            <div class="form-divider">or</div>
            <p class="auth-footer">
                Already have an account? <a href="{% url 'login' %}">Sign in here</a>
            </p>
        </div>
    </div>
</div>

<script>
function togglePassword(fieldId, iconId) {
    const f = document.getElementById(fieldId);
    const i = document.getElementById(iconId);
    if (f.type === 'password') { f.type = 'text'; i.className = 'fas fa-eye-slash'; }
    else { f.type = 'password'; i.className = 'fas fa-eye'; }
}
</script>
{% endblock %}
